---
title: "Development"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{development}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(ActivtityInfoQuality)
```

<!-- WARNING - This vignette is generated by {fusen} from dev/function_documentation.Rmd: do not edit by hand -->

 



# fct_read_lookup

    

  

```{r example-fct_read_lookup}
lookup_dfadmin1 <- fct_read_lookup(type = "admin1")
head(lookup_dfadmin1, 10)

lookup_dfadmin2 <- fct_read_lookup(type = "admin2")
head(lookup_dfadmin2, 10)

lookup_dfindicator <- fct_read_lookup(type = "indicator")
head(lookup_dfindicator, 10)

lookup_dfpartner <- fct_read_lookup(type = "partner")
head(lookup_dfpartner, 10)

```

  

# fct_read_data

    

  

```{r example-fct_read_data}

## Pulling everything... can be long..
df5W <- fct_read_data()
head( df5W, 10)

## testing the filters
df5Wctr <- fct_read_data(filter = "country",
                         value = "Colombia")
head( df5Wctr, 10)

df5Wpart <- fct_read_data(filter = "partner",
                         value = "United Nations High Commissioner for Refugees (UNHCR)")
head( df5Wpart , 10)

df5Wpart2 <- fct_read_data(filter = "partner",
                         value = "CCEFIRO Association")

```

  

# fct_error_report

    

  

```{r example-fct_error_report}
lookup_dfadmin1 <- fct_read_lookup(type = "admin1")
lookup_dfadmin2 <- fct_read_lookup(type = "admin2")
lookup_dfpartner <- fct_read_lookup(type = "partner")
lookup_dfindicator <- fct_read_lookup(type = "indicator")

## First example
df5Wpart <- fct_read_data(filter = "partner",
    value = "United Nations High Commissioner for Refugees (UNHCR)")
resultpart <- fct_error_report(df5Wpart, 
                               lookup_dfadmin1, 
                               lookup_dfadmin2, 
                               lookup_dfindicator, 
                               lookup_dfpartner)
 
print(resultpart$plot_Country)

## Second example
df5Wctr <- fct_read_data(filter = "country",
                         value = "Peru")
resultctr <- fct_error_report(df5Wctr, 
                               lookup_dfadmin1, 
                               lookup_dfadmin2, 
                               lookup_dfindicator, 
                               lookup_dfpartner)

print(resultctr$plot_Appealing) 
head(resultctr[["ErrorReportclean"]], 10)


## last example with offline data..
df5Woffline <-  readxl::read_excel( system.file("Activities_5W_2023.xlsx", 
                                                package = "ActivtityInfoQuality") )
resultctr <- fct_error_report(df5Woffline, 
                               lookup_dfadmin1, 
                               lookup_dfadmin2, 
                               lookup_dfindicator, 
                               lookup_dfpartner)


```

  

# fct_aggregate_data

    

  

```{r example-fct_aggregate_data}

lookup_dfindicator <- fct_read_lookup(type = "indicator")
df5W <- fct_read_data() 


df5Wctr <- fct_read_data(filter = "country",
                         value = "Bolivia")
resultpinsum <- fct_aggregate_data(df5W = df5Wctr,
                             lookup_dfindicator, 
                             proportions = "pin",  
                             totalmodel = "sum" )
## Check all 6 combinations...

### Combination 1
resultpinsum <- fct_aggregate_data(df5W,
                             lookup_dfindicator, 
                             proportions = "pin",  
                             totalmodel = "sum"   
)

head(resultpinsum, 10)

### Combination 2
resulttargetsum <- fct_aggregate_data(df5W,
                             lookup_dfindicator,
                             proportions = "target",  
                             totalmodel = "sum"   
)

head(resulttargetsum, 10)


### Combination 3
resultpinmaxsector <- fct_aggregate_data(df5W,
                             lookup_dfindicator,
                             proportions = "pin",  
                             totalmodel = "maxsector"   
)

head(resultpinmaxsector, 10)


### Combination 4
resulttargetmaxsector<- fct_aggregate_data(df5W,
                             lookup_dfindicator,
                             proportions = "target",  
                             totalmodel = "maxsector"   
)

head(resulttargetmaxsector, 10)


### Combination 5
resultpinsouthernconemodel <- fct_aggregate_data(df5W,
                             lookup_dfindicator,
                             proportions = "pin",  
                             totalmodel = "southernconemodel"   
)

head(resultpinsouthernconemodel, 10)


### Combination 6
resulttargetsouthernconemodel <- fct_aggregate_data(df5W,
                             lookup_dfindicator,
                             proportions = "target", 
                             totalmodel = "southernconemodel"   
)

head(resulttargetsouthernconemodel, 10)




```

  

  
  


# run_app

<!--
Create a chunk for the core of the function

- The chunk needs to be named `function` at least
- It contains the code of a documented function
- The chunk can also be named `function-my_function` to make it easily
findable in your Rmd
- Let the `@examples` part empty, and use the next `examples` chunk instead to present reproducible examples

After inflating the template

-  This function code will automatically be added in a new file in the "R/" directory
-->
    

<!--
Create a chunk with an example of use for your function

- The chunk needs to be named `examples` at least
- It contains working examples of your function
- The chunk is better be named `examples-my_median` to be handled
correctly when inflated as a vignette

After inflating the template

-  This example will automatically be added in the '@examples' part of our function above in the "R/" directory
- This example will automatically be added in the vignette created from this Rmd template
-->


```{r example-run_app}
# run_app()
```

